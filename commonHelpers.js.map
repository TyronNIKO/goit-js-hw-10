{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\n// Описаний в документації\nimport flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\nimport { Ukrainian } from 'flatpickr/dist/l10n/uk.js';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nclass Timer {\n\tconstructor() {\n\t\tthis.refs = {\n\t\t\tinput: document.querySelector('input#datetime-picker'),\n\t\t\tstart: document.querySelector('[data-start]'),\n\t\t\tdays: document.querySelector('[data-days]'),\n\t\t\thours: document.querySelector('[data-hours]'),\n\t\t\tminutes: document.querySelector('[data-minutes]'),\n\t\t\tseconds: document.querySelector('[data-seconds]'),\n\t\t};\n\t\tthis.futureDate = null;\n\t}\n\tconvertMs(ms) {\n\t\tconst second = 1000;\n\t\tconst minute = second * 60;\n\t\tconst hour = minute * 60;\n\t\tconst day = hour * 24;\n\t\tconst days = Math.floor(ms / day);\n\t\tconst hours = Math.floor((ms % day) / hour);\n\t\tconst minutes = Math.floor(((ms % day) % hour) / minute);\n\t\tconst seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\t\treturn { days, hours, minutes, seconds };\n\t}\n\tvalidateTime(current, selected) {\n\t\treturn current < selected;\n\t}\n\taddLeadingZero(value) {\n\t\t// return value < 10 ? '0' + value : value;\n\t\treturn String(value).padStart(2, '0');\n\t}\n\t// renderTimer({ days, hours, minutes, seconds }) {\n\t// \tthis.refs.days.innerText = this.addLeadingZero(days);\n\t// \tthis.refs.hours.innerText = this.addLeadingZero(hours);\n\t// \tthis.refs.minutes.innerText = this.addLeadingZero(minutes);\n\t// \tthis.refs.seconds.innerText = this.addLeadingZero(seconds);\n\t// }\n\trenderTimer(obj) {\n\t\tconst keys = Object.keys(obj);\n\t\tkeys.forEach(key => {\n\t\t\tthis.refs[key].innerText = this.addLeadingZero(obj[key]);\n\t\t});\n\t}\n\tnewInterval(time, delay) {\n\t\tconst interval = setInterval(() => {\n\t\t\tlet currentTime = Date.now();\n\t\t\tconst remainingTime = time - currentTime;\n\t\t\tif (remainingTime >= 0) {\n\t\t\t\tthis.renderTimer(this.convertMs(remainingTime));\n\t\t\t} else {\n\t\t\t\tiziToast.info({\n\t\t\t\t\ttimeout: 10000,\n\t\t\t\t\tposition: 'topCenter',\n\t\t\t\t\ttitle: 'Info',\n\t\t\t\t\tmessage: 'Time expired. Input has been reset!',\n\t\t\t\t});\n\t\t\t\tclearInterval(interval);\n\t\t\t\tthis.refs.input.removeAttribute('disabled');\n\t\t\t\tthis.refs.start.removeAttribute('disabled');\n\t\t\t}\n\t\t}, delay);\n\t}\n\tinit() {\n\t\tthis.refs.start.setAttribute('disabled', '');\n\t\tthis.refs.start.addEventListener('click', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.newInterval(this.futureDate, 1000);\n\t\t\tthis.refs.input.setAttribute('disabled', '');\n\t\t\tthis.refs.start.setAttribute('disabled', '');\n\t\t});\n\t}\n}\nconst timer = new Timer();\n\nconst options = {\n\tenableTime: true,\n\ttime_24hr: true,\n\tdefaultDate: new Date(),\n\tminuteIncrement: 1,\n\tlocale: Ukrainian, // locale for this instance only\n\tonClose(selectedDates) {\n\t\tconsole.log(selectedDates[0]);\n\t\tconst validation = timer.validateTime(Date.now(), selectedDates[0]);\n\t\tif (validation) {\n\t\t\tconst diff = selectedDates[0] - Date.now();\n\t\t\ttimer.renderTimer(timer.convertMs(diff));\n\t\t\ttimer.refs.start.removeAttribute('disabled');\n\t\t\ttimer.futureDate = selectedDates[0].getTime();\n\t\t} else {\n\t\t\tiziToast.error({\n\t\t\t\tposition: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter\n\t\t\t\ttitle: 'Error',\n\t\t\t\tmessage: 'Please choose a date in the future',\n\t\t\t});\n\t\t}\n\t},\n};\n\ntimer.init();\n\nflatpickr(timer.refs.input, options);\n"],"names":["Timer","ms","days","hours","minutes","seconds","current","selected","value","obj","key","time","delay","interval","currentTime","remainingTime","iziToast","e","timer","options","Ukrainian","selectedDates","diff","flatpickr"],"mappings":"kGAaA,MAAMA,CAAM,CACX,aAAc,CACb,KAAK,KAAO,CACX,MAAO,SAAS,cAAc,uBAAuB,EACrD,MAAO,SAAS,cAAc,cAAc,EAC5C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACnD,EACE,KAAK,WAAa,IAClB,CACD,UAAUC,EAAI,CAKb,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACtC,CACD,aAAaC,EAASC,EAAU,CAC/B,OAAOD,EAAUC,CACjB,CACD,eAAeC,EAAO,CAErB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACpC,CAOD,YAAYC,EAAK,CACH,OAAO,KAAKA,CAAG,EACvB,QAAQC,GAAO,CACnB,KAAK,KAAKA,CAAG,EAAE,UAAY,KAAK,eAAeD,EAAIC,CAAG,CAAC,CAC1D,CAAG,CACD,CACD,YAAYC,EAAMC,EAAO,CACxB,MAAMC,EAAW,YAAY,IAAM,CAClC,IAAIC,EAAc,KAAK,MACvB,MAAMC,EAAgBJ,EAAOG,EACzBC,GAAiB,EACpB,KAAK,YAAY,KAAK,UAAUA,CAAa,CAAC,GAE9CC,EAAS,KAAK,CACb,QAAS,IACT,SAAU,YACV,MAAO,OACP,QAAS,qCACd,CAAK,EACD,cAAcH,CAAQ,EACtB,KAAK,KAAK,MAAM,gBAAgB,UAAU,EAC1C,KAAK,KAAK,MAAM,gBAAgB,UAAU,EAE3C,EAAED,CAAK,CACR,CACD,MAAO,CACN,KAAK,KAAK,MAAM,aAAa,WAAY,EAAE,EAC3C,KAAK,KAAK,MAAM,iBAAiB,QAASK,GAAK,CAC9CA,EAAE,eAAc,EAChB,KAAK,YAAY,KAAK,WAAY,GAAI,EACtC,KAAK,KAAK,MAAM,aAAa,WAAY,EAAE,EAC3C,KAAK,KAAK,MAAM,aAAa,WAAY,EAAE,CAC9C,CAAG,CACD,CACF,CACA,MAAMC,EAAQ,IAAIlB,EAEZmB,EAAU,CACf,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,OAAQC,EAAS,UACjB,QAAQC,EAAe,CAGtB,GAFA,QAAQ,IAAIA,EAAc,CAAC,CAAC,EACTH,EAAM,aAAa,KAAK,MAAOG,EAAc,CAAC,CAAC,EAClD,CACf,MAAMC,EAAOD,EAAc,CAAC,EAAI,KAAK,IAAG,EACxCH,EAAM,YAAYA,EAAM,UAAUI,CAAI,CAAC,EACvCJ,EAAM,KAAK,MAAM,gBAAgB,UAAU,EAC3CA,EAAM,WAAaG,EAAc,CAAC,EAAE,QAAO,CAC9C,MACGL,EAAS,MAAM,CACd,SAAU,WACV,MAAO,QACP,QAAS,oCACb,CAAI,CAEF,CACF,EAEAE,EAAM,KAAI,EAEVK,EAAUL,EAAM,KAAK,MAAOC,CAAO"}